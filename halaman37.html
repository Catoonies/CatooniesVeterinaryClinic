<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Borang Tempahan & Persetujuan Rawatan</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #fff;
      color: #000;
      padding: 20px;
    }
    label, input, select, textarea {
      display: block;
      width: 100%;
      margin-bottom: 10px;
    }
    button {
      background-color: #FFD700;
      color: #000;
      padding: 10px;
      border: none;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h2>BORANG SARINGAN VAKSINASI / PEMANDULAN/ GROOMING / BOARDING üêæ</h2>

  <label for="bahasa">Pilih Bahasa / Select Language / ÈÄâÊã©ËØ≠Ë®Ä:
    <select id="bahasa" onchange="tukarBahasa()">
      <option value="ms">BM</option>
      <option value="en">English</option>
      <option value="zh">ÁÆÄ‰Ωì‰∏≠Êñá</option>
    </select>
  </label>

  <form id="whatsappForm">
    <h3 class="label" data-key="ownerInfo">Maklumat Pemilik</h3>
    <label class="label" data-key="ownerName">Nama Pemilik: <input type="text" id="nama_pemilik"></label>
    <label class="label" data-key="ownerIC">No. Kad Pengenalan: <input type="text" id="ic_pemilik"></label>
    <label class="label" data-key="ownerAddress">Alamat: <textarea id="alamat_pemilik"></textarea></label>
    <label class="label" data-key="ownerPhone">No. Telefon: <input type="text" id="telefon_pemilik"></label>
    <label class="label" data-key="ownerEmail">Emel: <input type="email" id="emel_pemilik"></label>

    <h3 class="label" data-key="catInfo">Maklumat Kucing üê±</h3>
    <label class="label" data-key="catName">Nama Kucing: <input type="text" id="nama_kucing"></label>
    <label class="label" data-key="catAge">Umur: <input type="text" id="umur_kucing"></label>
    <label class="label" data-key="catBreed">Baka: <input type="text" id="baka_kucing"></label>
    <label class="label" data-key="catWeight">Berat: <input type="text" id="berat_kucing"></label>
    <label class="label" data-key="catVaccine">Status Vaksin:
      <select id="vaksin_kucing">
        <option value="Sila Pilih">Sila Pilih</option>
        <option value="Tiada Vaksin">Tiada Vaksin</option>
        <option value="Vaksin Booster">Vaksin Booster</option>
        <option value="Vaksin Tahunan">Vaksin Tahunan</option>
      </select>
    </label>

    <h3 class="label" data-key="screening">Soalan-soalan Saringan</h3>

    <div id="soalan-container"></div>

    <h3 class="label" data-key="appointment">Temujanji & Rawatan üóìÔ∏è</h3>
    <label class="label" data-key="appointmentDate">Tarikh Temujanji: <input type="date" id="tarikh_temujanji"></label>
    <label class="label" data-key="appointmentPurpose">Tujuan Pemeriksaan:
      <select id="tujuan_pemeriksaan">
        <option value="Sila Pilih">Sila Pilih</option>
        <option value="Rawatan">Rawatan</option>
        <option value="Vaksin">Vaksin</option>
        <option value="Grooming">Grooming</option>
        <option value="Boarding">Boarding</option>
        <option value="Sakit">Sakit</option>
      </select>
    </label>
    <label class="label" data-key="symptoms">Gejala: <textarea id="gejala"></textarea></label>

    <h3 class="label" data-key="consent">Persetujuan</h3>
    <p class="label" data-key="agreement">Saya bersetuju untuk meneruskan rawatan dan akan bertanggungjawab sepenuhnya terhadap penjagaan selepas prosedur.</p>

    <button type="button" onclick="hantarKeWhatsApp()">Hantar</button>
  </form>

  <script>
    const soalanTeks = [
      "1. Adakah kucing baru dibeli/diambil kurang 7 hari?",
      "2. Adakah kucing baru balik boarding/grooming?",
      "3. Ada perancangan untuk boarding/grooming dalam masa 1-3 bulan?",
      "4. Ada gejala penyakit (cirit, muntah, selsema, bersin, kurang aktif, kurang makan)?",
      "5. Ada kucing sakit/mati di rumah dalam 2 minggu sebelum?",
      "6. Kucing ada masalah mulut berbau dan kurang makan?",
      "7. Boleh hadir susulan selepas seminggu pemeriksaan?",
      "8. Boleh sangkarkan kucing dalam jangka masa 1-3 bulan?",
      "9. Ada luka di kawasan badan kucing?",
      "10. Ada sangkar kecil (1 ekor kucing dewasa sahaja) di rumah?",
      "11. Pernah buat rawatan di klinik lain?",
      "12. Adakah kucing ini tidak boleh disentuh oleh orang lain?",
      "13. Adakah kucing ini garang dan menyerang?"
    ];

    const labelTeks = {
      ms: [...soalanTeks],
      en: [
        "1. Has the cat been bought/adopted in the last 7 days?",
        "2. Has the cat just returned from boarding/grooming?",
        "3. Any plan for boarding/grooming in the next 1-3 months?",
        "4. Any symptoms (diarrhea, vomiting, flu, sneezing, low energy, low appetite)?",
        "5. Any sick/dead cat at home within the last 2 weeks?",
        "6. Does the cat have bad breath and low appetite?",
        "7. Can attend a follow-up after 1 week?",
        "8. Can cage the cat for 1-3 months?",
        "9. Any wounds on the cat's body?",
        "10. Is there a small cage (for 1 adult cat) at home?",
        "11. Has the cat been treated at another clinic?",
        "12. Is the cat untouchable by others?",
        "13. Is the cat aggressive and attacking?"
      ],
      zh: [
        "1. Áå´Âí™ÊòØÂê¶Âú®ËøáÂéª7Â§©ÂÜÖË¢´È¢ÜÂÖªÊàñË¥≠‰π∞Ôºü",
        "2. Áå´Âí™ÊòØÂê¶Âàö‰ªéÂØÑÂÖª/ÁæéÂÆπÂõûÊù•Ôºü",
        "3. ÊòØÂê¶Êúâ1-3‰∏™ÊúàÂÜÖÂØÑÂÖª/ÁæéÂÆπÁöÑËÆ°ÂàíÔºü",
        "4. ÊòØÂê¶ÊúâÁñæÁóÖÁóáÁä∂ÔºàËÖπÊ≥ª„ÄÅÂëïÂêê„ÄÅÊÑüÂÜí„ÄÅÊâìÂñ∑Âöè„ÄÅÂóúÁù°„ÄÅÈ£üÊ¨≤‰∏çÊåØÔºâÔºü",
        "5. ÂÆ∂‰∏≠ÊòØÂê¶ÊúâÁå´Âí™Âú®ËøáÂéª2Âë®ÂÜÖÁîüÁóÖÊàñÊ≠ª‰∫°Ôºü",
        "6. Áå´Âí™ÊòØÂê¶Âè£Ëá≠‰∏îÈ£üÊ¨≤Â∑ÆÔºü",
        "7. ËÉΩÂê¶Âú®‰∏ÄÂë®ÂêéÂõûËØäÔºü",
        "8. ËÉΩÂê¶Â∞ÜÁå´Âí™ÂÖ≥Á¨º1-3‰∏™ÊúàÔºü",
        "9. Áå´Âí™Ë∫´‰ΩìÊòØÂê¶Êúâ‰º§Âè£Ôºü",
        "10. ÂÆ∂‰∏≠ÊòØÂê¶ÊúâÂ∞èÂûãÁå´Á¨ºÔºàÂè™ÂÆπÁ∫≥‰∏ÄÂè™ÊàêÁå´ÔºâÔºü",
        "11. ÊòØÂê¶ÊõæÂú®ÂÖ∂‰ªñËØäÊâÄÂ∞±ËØäÔºü",
        "12. Áå´Âí™ÊòØÂê¶Êó†Ê≥ïËÆ©‰ªñ‰∫∫Ëß¶Á¢∞Ôºü",
        "13. Áå´Âí™ÊòØÂê¶Âá∂ÁåõÂπ∂‰ºöÊîªÂáªÔºü"
      ]
    };

    function tukarBahasa() {
      const bahasa = document.getElementById("bahasa").value;
      document.querySelectorAll(".saringan-label").forEach((label, index) => {
        label.textContent = labelTeks[bahasa][index];
      });
      document.querySelectorAll(".label").forEach(el => {
        const key = el.dataset.key;
        if (labelDict[bahasa][key]) el.textContent = labelDict[bahasa][key];
      });
    }

    const labelDict = {
      ms: {
        ownerInfo: "Maklumat Pemilik",
        ownerName: "Nama Pemilik:",
        ownerIC: "No. Kad Pengenalan:",
        ownerAddress: "Alamat:",
        ownerPhone: "No. Telefon:",
        ownerEmail: "Emel:",
        catInfo: "Maklumat Kucing üê±",
        catName: "Nama Kucing:",
        catAge: "Umur:",
        catBreed: "Baka:",
        catWeight: "Berat:",
        catVaccine: "Status Vaksin:",
        screening: "Soalan-soalan Saringan",
        appointment: "Temujanji & Rawatan üóìÔ∏è",
        appointmentDate: "Tarikh Temujanji:",
        appointmentPurpose: "Tujuan Pemeriksaan:",
        symptoms: "Gejala:",
        consent: "Persetujuan",
        agreement: "Saya bersetuju untuk meneruskan rawatan dan akan bertanggungjawab sepenuhnya terhadap penjagaan selepas prosedur."
      },
      en: {
        ownerInfo: "Owner Information",
        ownerName: "Owner Name:",
        ownerIC: "ID Number:",
        ownerAddress: "Address:",
        ownerPhone: "Phone Number:",
        ownerEmail: "Email:",
        catInfo: "Cat Information üê±",
        catName: "Cat Name:",
        catAge: "Age:",
        catBreed: "Breed:",
        catWeight: "Weight:",
        catVaccine: "Vaccination Status:",
        screening: "Screening Questions",
        appointment: "Appointment & Treatment üóìÔ∏è",
        appointmentDate: "Appointment Date:",
        appointmentPurpose: "Purpose of Visit:",
        symptoms: "Symptoms:",
        consent: "Consent",
        agreement: "I agree to proceed with the treatment and will take full responsibility for aftercare."
      },
      zh: {
        ownerInfo: "‰∏ª‰∫∫ËµÑÊñô",
        ownerName: "‰∏ª‰∫∫ÁöÑÂêçÂ≠ó:",
        ownerIC: "Ë∫´‰ªΩËØÅÂè∑Á†Å:",
        ownerAddress: "Âú∞ÂùÄ:",
        ownerPhone: "ÁîµËØùÂè∑Á†Å:",
        ownerEmail: "ÁîµÈÇÆ:",
        catInfo: "Áå´Âí™ËµÑÊñô üê±",
        catName: "Áå´Âí™ÂêçÂ≠ó:",
        catAge: "Âπ¥ÈæÑ:",
        catBreed: "ÂìÅÁßç:",
        catWeight: "‰ΩìÈáç:",
        catVaccine: "Áñ´ËãóÊé•ÁßçÊÉÖÂÜµ:",
        screening: "Á≠õÊü•ÈóÆÈ¢ò",
        appointment: "È¢ÑÁ∫¶‰∏éÊ≤ªÁñó üóìÔ∏è",
        appointmentDate: "È¢ÑÁ∫¶Êó•Êúü:",
        appointmentPurpose: "Ê£ÄÊü•ÁõÆÁöÑ:",
        symptoms: "ÁóáÁä∂:",
        consent: "ÂêåÊÑè‰π¶",
        agreement: "ÊàëÂêåÊÑèËøõË°åÊ≤ªÁñóÔºåÂπ∂Â∞ÜÂÆåÂÖ®Ë¥üË¥£ÊúØÂêéÁöÑÊä§ÁêÜ„ÄÇ"
      }
    };

    window.onload = () => {
      const container = document.getElementById("soalan-container");
      soalanTeks.forEach((text, i) => {
        const label = document.createElement("label");
        label.className = "saringan-label";
        const select = document.createElement("select");
        select.className = "saringan";
        select.innerHTML = `<option value="0">Sila Pilih</option><option value="1">Ya</option><option value="0">Tidak</option>`;
        label.appendChild(document.createTextNode(text));
        label.appendChild(select);
        container.appendChild(label);
      });
    }

    function hantarKeWhatsApp() {
      const saringan = document.querySelectorAll(".saringan");
      let jumlahYa = 0;
      let sebabTidakLayak = [];

      saringan.forEach((item, index) => {
        if (item.value === "1") {
          jumlahYa++;
        } else {
          sebabTidakLayak.push(soalanTeks[index]);
        }
      });

      let skorSaringan = Math.round((jumlahYa / saringan.length) * 100);
      let statusKelayakan = (skorSaringan >= 80) 
        ? "‚úÖ Layak untuk vaksinasi/pemandulan." 
        : "‚ùå Tidak layak vaksinasi/pemandulan  (skor < 80%).";
      let alasan = (sebabTidakLayak.length > 0)
        ? "\n\nSebab tidak layak:\n- " + sebabTidakLayak.join("\n- ")
        : "";

      let mesej = `Borang Tempahan & Persetujuan Rawatan üêæ\n\n` +
                  `Nama Pemilik: ${document.getElementById("nama_pemilik").value}\n` +
                  `No. Kad Pengenalan: ${document.getElementById("ic_pemilik").value}\n` +
                  `Alamat: ${document.getElementById("alamat_pemilik").value}\n` +
                  `No. Telefon: ${document.getElementById("telefon_pemilik").value}\n` +
                  `Emel: ${document.getElementById("emel_pemilik").value}\n\n` +
                  `Nama Kucing: ${document.getElementById("nama_kucing").value}\n` +
                  `Umur: ${document.getElementById("umur_kucing").value}\n` +
                  `Baka: ${document.getElementById("baka_kucing").value}\n` +
                  `Berat: ${document.getElementById("berat_kucing").value}\n` +
                  `Status Vaksin: ${document.getElementById("vaksin_kucing").value}\n\n` +
                  `Tarikh Temujanji: ${document.getElementById("tarikh_temujanji").value}\n` +
                  `Tujuan Pemeriksaan: ${document.getElementById("tujuan_pemeriksaan").value}\n` +
                  `Gejala: ${document.getElementById("gejala").value}\n\n` +
                  `Skor Saringan: ${skorSaringan}%\n` +
                  `${statusKelayakan}${alasan}\n\n` +
                  `Saya bersetuju untuk meneruskan rawatan dan akan bertanggungjawab sepenuhnya terhadap penjagaan selepas prosedur.`;

      let whatsappURL = `https://wa.me/60182624047?text=${encodeURIComponent(mesej)}`;
      window.open(whatsappURL, "_blank");
    }
  </script>
</body>
</html>
