<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Borang Tempahan & Persetujuan Rawatan</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #fff;
      color: #000;
      padding: 20px;
    }
    label, input, select, textarea {
      display: block;
      width: 100%;
      margin-bottom: 10px;
    }
    button {
      background-color: #FFD700;
      color: #000;
      padding: 10px;
      border: none;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h2>Borang Tempahan & Persetujuan Rawatan üêæ</h2>
  <form id="whatsappForm">
    <h3>Maklumat Pemilik</h3>
    <label>Nama Pemilik: <input type="text" id="nama_pemilik"></label>
    <label>No. Kad Pengenalan: <input type="text" id="ic_pemilik"></label>
    <label>Alamat: <textarea id="alamat_pemilik"></textarea></label>
    <label>No. Telefon: <input type="text" id="telefon_pemilik"></label>
    <label>Emel: <input type="email" id="emel_pemilik"></label>

    <h3>Maklumat Kucing üê±</h3>
    <label>Nama Kucing: <input type="text" id="nama_kucing"></label>
    <label>Umur: <input type="text" id="umur_kucing"></label>
    <label>Baka: <input type="text" id="baka_kucing"></label>
    <label>Berat: <input type="text" id="berat_kucing"></label>
    <label>Status Vaksin:
      <select id="vaksin_kucing">
        <option value="Sila Pilih">Sila Pilih</option>
        <option value="Tiada Vaksin">Tiada Vaksin</option>
        <option value="Vaksin Booster">Vaksin Booster</option>
        <option value="Vaksin Tahunan">Vaksin Tahunan</option>
      </select>
    </label>

    <h3>Saringan Sebelum Vaksinasi/Pemandulan ‚úÖ‚ùå</h3>
    <label>1. Kucing aktif & makan seperti biasa?
      <select class="saringan">
        <option value="1">Ya</option>
        <option value="0">Tidak</option>
      </select>
    </label>
    <label>2. Tiada selsema atau cirit-birit?
      <select class="saringan">
        <option value="1">Ya</option>
        <option value="0">Tidak</option>
      </select>
    </label>
    <label>3. Berat badan stabil?
      <select class="saringan">
        <option value="1">Ya</option>
        <option value="0">Tidak</option>
      </select>
    </label>
    <label>4. Tiada luka luar atau dalam mulut?
      <select class="saringan">
        <option value="1">Ya</option>
        <option value="0">Tidak</option>
      </select>
    </label>
    <label>5. Tiada kutu/jangkitan kulit yang serius?
      <select class="saringan">
        <option value="1">Ya</option>
        <option value="0">Tidak</option>
      </select>
    </label>
    <label>6. Boleh sangkarkan kucing selepas pemeriksaan/pemandulan?
      <select class="saringan">
        <option value="1">Ya</option>
        <option value="0">Tidak</option>
      </select>
    </label>
    <label>7. Ada sangkar kecil (1 ekor kucing dewasa sahaja) di rumah?
      <select class="saringan">
        <option value="1">Ya</option>
        <option value="0">Tidak</option>
      </select>
    </label>
    <label>8. Boleh hadir susulan selepas seminggu pemeriksaan/pemandulan?
      <select class="saringan">
        <option value="1">Ya</option>
        <option value="0">Tidak</option>
      </select>
    </label>
    <label>9. Boleh sangkarkan kucing 1-3 bulan selepas vaksinasi pertama?
      <select class="saringan">
        <option value="1">Ya</option>
        <option value="0">Tidak</option>
      </select>
    </label>
    <label>10. Pernah buat rawatan di klinik lain?
      <select class="saringan">
        <option value="1">Ya</option>
        <option value="0">Tidak</option>
      </select>
    </label>

    <h3>Temujanji & Rawatan üóìÔ∏è</h3>
    <label>Tarikh Temujanji: <input type="date" id="tarikh_temujanji"></label>
    <label>Tujuan Pemeriksaan:
      <select id="tujuan_pemeriksaan">
        <option value="Sila Pilih">Sila Pilih</option>
        <option value="Rawatan">Rawatan</option>
        <option value="Vaksin">Vaksin</option>
        <option value="Grooming">Grooming</option>
        <option value="Boarding">Boarding</option>
        <option value="Sakit">Sakit</option>
      </select>
    </label>
    <label>Gejala: <textarea id="gejala"></textarea></label>

    <h3>Persetujuan</h3>
    <p>Saya bersetuju untuk meneruskan rawatan dan akan bertanggungjawab sepenuhnya terhadap penjagaan selepas prosedur.</p>
    
    <button type="button" onclick="hantarKeWhatsApp()">Hantar</button>
  </form>

  <script>
    function hantarKeWhatsApp() {
      let saringan = document.querySelectorAll(".saringan");
      let soalanTeks = [
        "1. Kucing aktif & makan seperti biasa?",
        "2. Tiada selsema atau cirit-birit?",
        "3. Berat badan stabil?",
        "4. Tiada luka luar atau dalam mulut?",
        "5. Tiada kutu/jangkitan kulit yang serius?",
        "6. Boleh sangkarkan kucing selepas pemeriksaan/pemandulan?",
        "7. Ada sangkar kecil di rumah?",
        "8. Boleh hadir susulan selepas seminggu?",
        "9. Boleh sangkarkan kucing 1-3 bulan selepas vaksinasi pertama?",
        "10. Pernah buat rawatan di klinik lain?"
      ];
      
      let jumlahSoalan = saringan.length;
      let jumlahYa = 0;
      let sebabTidakLayak = [];

      saringan.forEach((item, index) => {
        if (item.value === "1") {
          jumlahYa++;
        } else {
          sebabTidakLayak.push(soalanTeks[index]);
        }
      });

      let skorSaringan = Math.round((jumlahYa / jumlahSoalan) * 100);
      let statusKelayakan = (skorSaringan >= 80) 
        ? "‚úÖ Layak untuk vaksinasi/pemandulan." 
        : "‚ùå Tidak layak (skor < 80%).";

      let alasan = (sebabTidakLayak.length > 0)
        ? "\n\nSebab tidak layak:\n- " + sebabTidakLayak.join("\n- ")
        : "";

      let namaPemilik = document.getElementById("nama_pemilik").value;
      let icPemilik = document.getElementById("ic_pemilik").value;
      let alamatPemilik = document.getElementById("alamat_pemilik").value;
      let telefonPemilik = document.getElementById("telefon_pemilik").value;
      let emelPemilik = document.getElementById("emel_pemilik").value;
      let namaKucing = document.getElementById("nama_kucing").value;
      let umurKucing = document.getElementById("umur_kucing").value;
      let bakaKucing = document.getElementById("baka_kucing").value;
      let beratKucing = document.getElementById("berat_kucing").value;
      let vaksinKucing = document.getElementById("vaksin_kucing").value;
      let tarikhTemujanji = document.getElementById("tarikh_temujanji").value;
      let tujuanPemeriksaan = document.getElementById("tujuan_pemeriksaan").value;
      let gejala = document.getElementById("gejala").value;

      let mesej = `Borang Tempahan & Persetujuan Rawatan üêæ\n\n` +
                  `Nama Pemilik: ${namaPemilik}\n` +
                  `No. Kad Pengenalan: ${icPemilik}\n` +
                  `Alamat: ${alamatPemilik}\n` +
                  `No. Telefon: ${telefonPemilik}\n` +
                  `Emel: ${emelPemilik}\n\n` +
                  `Nama Kucing: ${namaKucing}\n` +
                  `Umur: ${umurKucing}\n` +
                  `Baka: ${bakaKucing}\n` +
                  `Berat: ${beratKucing}\n` +
                  `Status Vaksin: ${vaksinKucing}\n\n` +
                  `Tarikh Temujanji: ${tarikhTemujanji}\n` +
                  `Tujuan Pemeriksaan: ${tujuanPemeriksaan}\n` +
                  `Gejala: ${gejala}\n\n` +
                  `Skor Saringan: ${skorSaringan}%\n` +
                  `${statusKelayakan}${alasan}\n\n` +
                  `Saya bersetuju untuk meneruskan rawatan dan akan bertanggungjawab sepenuhnya terhadap penjagaan selepas prosedur.`;

      let whatsappURL = `https://wa.me/60182624047?text=${encodeURIComponent(mesej)}`;
      window.open(whatsappURL, "_blank");
    }
  </script>
</body>
</html>
