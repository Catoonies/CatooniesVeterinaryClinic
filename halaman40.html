<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>治疗预约与同意书</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #fff;
      color: #000;
      padding: 20px;
    }
    label, input, select, textarea {
      display: block;
      width: 100%;
      margin-bottom: 10px;
    }
    button {
      background-color: #FFD700;
      color: #000;
      padding: 10px;
      border: none;
      cursor: pointer;
    }
  </style>
</head>
<body>

<section style="background-color: #fef9f5; border-left: 5px solid #fbbf24; padding: 20px; border-radius: 12px; font-family: Arial, sans-serif; color: #333;">
  <h2 style="font-size: 1.5em; margin-bottom: 15px;">🩺 筛查说明区 <strong>Dr. Meow</strong></h2>

  <p style="font-weight: bold; font-size: 1.1em; margin-bottom: 15px;">
    这一步非常重要，主要有以下原因：
  </p>

  <ul style="list-style: none; padding-left: 0;">
    <li style="margin-bottom: 15px;">
      ✅ <strong>1. 了解猫咪当前的健康状况</strong><br>
      🐱 筛查让兽医能够早期发现疾病迹象、异常行为或主人可能忽略的隐藏症状。<br>
      💉 即使只是来接种疫苗或美容，也非常重要。
    </li>

    <li style="margin-bottom: 15px;">
      ✅ <strong>2. 预防感染或对其他猫造成风险</strong><br>
      🤧 若猫咪有打喷嚏、流泪、虚弱等症状，可能对诊所内其他猫造成风险。<br>
      🚨 筛查可帮助立即隔离或采取必要措施。
    </li>

    <li style="margin-bottom: 15px;">
      ✅ <strong>3. 提前为治疗做好准备</strong><br>
      🩻 兽医可以判断是否需要进一步检查（如血液检测、X光或特定药物）。<br>
      🕒 这也有助于安排时间与优先顺序，确保真正有健康需求的猫得到照顾。
    </li>

    <li style="margin-bottom: 15px;">
      ✅ <strong>4. 术前评估</strong><br>
      🐾 若猫咪将进行绝育、接种或寄养，早期筛查可确保其健康、安全地接受程序。
    </li>

    <li style="margin-bottom: 15px;">
      ✅ <strong>5. 降低并发症风险</strong><br>
      🩺 基本检查可提前发现问题，如高烧、伤口、脱水或贫血，避免恶化。
    </li>
  </ul>

  <p style="background-color: #fff3cd; padding: 15px; border-radius: 8px; border: 1px solid #ffeeba; font-weight: bold;">
    ✨ <em>总结：</em><br>
    筛查不仅仅是例行公事，而是保护您家猫咪健康及诊所内其他猫咪的重要步骤。
  </p>
</section>

<h2>治疗预约与同意书 🐾</h2>
<form id="whatsappForm">
  <h3>主人资料</h3>
  <label>姓名：<input type="text" id="nama_pemilik"></label>
  <label>身份证号码：<input type="text" id="ic_pemilik"></label>
  <label>地址：<textarea id="alamat_pemilik"></textarea></label>
  <label>联系电话：<input type="text" id="telefon_pemilik"></label>
  <label>电子邮件：<input type="email" id="emel_pemilik"></label>

  <h3>猫咪资料 🐱</h3>
  <label>猫名：<input type="text" id="nama_kucing"></label>
  <label>年龄：<input type="text" id="umur_kucing"></label>
  <label>品种：<input type="text" id="baka_kucing"></label>
  <label>体重：<input type="text" id="berat_kucing"></label>
  <label>颜色：<input type="text" id="warna_kucing"></label>
  <label>疫苗接种状态：
    <select id="vaksin_kucing">
      <option value="请选择">请选择</option>
      <option value="未接种">未接种</option>
      <option value="加强针">加强针</option>
      <option value="年度疫苗">年度疫苗</option>
    </select>
  </label>

  <h3>接种/绝育前健康筛查 ✅❌</h3>
  <label>1. 猫咪是否已在您家超过7天？
    <select class="saringan">
      <option value="1">请选择</option>
      <option value="1">是</option>
      <option value="0">否</option>
    </select>
  </label>
  <label>2. 猫咪过去一周是否未寄养或美容？
    <select class="saringan">
      <option value="0">请选择</option>
      <option value="1">是</option>
      <option value="0">否</option>
    </select>
  </label>
  <label>3. 接种后1–3个月内猫咪不会寄养？
    <select class="saringan">
      <option value="0">请选择</option>
      <option value="1">是</option>
      <option value="0">否</option>
    </select>
  </label>
  <label>4. 猫咪没有出现疾病迹象（腹泻、呕吐、感冒、打喷嚏、无力、食欲差）？
    <select class="saringan">
      <option value="0">请选择</option>
      <option value="1">是</option>
      <option value="0">否</option>
    </select>
  </label>
  <label>5. 家中过去两周无猫咪死亡？
    <select class="saringan">
      <option value="0">请选择</option>
      <option value="1">是</option>
      <option value="0">否</option>
    </select>
  </label>
  <label>6. 猫咪无口臭或进食困难？
    <select class="saringan">
      <option value="0">请选择</option>
      <option value="1">是</option>
      <option value="0">否</option>
    </select>
  </label>
  <label>7. 主人能在检查后一周内复诊？
    <select class="saringan">
      <option value="0">请选择</option>
      <option value="1">是</option>
      <option value="0">否</option>
    </select>
  </label>
  <label>8. 猫咪在治疗/接种后能关笼（1–3个月）？
    <select class="saringan">
      <option value="0">请选择</option>
      <option value="1">是</option>
      <option value="0">否</option>
    </select>
  </label>
  <label>9. 猫咪身体上无伤口？
    <select class="saringan">
      <option value="0">请选择</option>
      <option value="1">是</option>
      <option value="0">否</option>
    </select>
  </label>
  <label>10. 家中是否有小型猫笼（可容纳一只成年猫）？
    <select class="saringan">
      <option value="0">请选择</option>
      <option value="1">是</option>
      <option value="0">否</option>
    </select>
  </label>
  <label>11. 猫咪从未在其他诊所治疗过？
    <select class="saringan">
      <option value="0">请选择</option>
      <option value="1">是</option>
      <option value="0">否</option>
    </select>
  </label>
  <label>12. 猫咪可以被他人触碰？
    <select class="saringan">
      <option value="0">请选择</option>
      <option value="1">是</option>
      <option value="0">否</option>
    </select>
  </label>
  <label>13. 猫咪性格温顺，除主人外也能被他人抚摸？
    <select class="saringan">
      <option value="0">请选择</option>
      <option value="1">是</option>
      <option value="0">否</option>
    </select>
  </label>
  <label>14. 接种第一针加强针后，猫咪能连续关笼（24小时）1–3个月？
    <select class="saringan">
      <option value="0">请选择</option>
      <option value="1">是</option>
      <option value="0">否</option>
    </select>
  </label>
  <label>15. 检查后猫咪能连续关笼（24小时）1–4周？
    <select class="saringan">
      <option value="0">请选择</option>
      <option value="1">是</option>
      <option value="0">否</option>
    </select>
  </label>

  <h3>预约与治疗 🗓️</h3>
  <label>预约日期：<input type="date" id="tarikh_temujanji"></label>
  <label>就诊目的：
    <select id="tujuan_pemeriksaan">
      <option value="请选择">请选择</option>
      <option value="治疗">治疗</option>
      <option value="疫苗接种">疫苗接种</option>
      <option value="美容">美容</option>
      <option value="寄养">寄养</option>
      <option value="生病">生病</option>
    </select>
  </label>
  <label>症状描述：<textarea id="gejala"></textarea></label>

  <h3>同意声明</h3>
  <p>我同意进行相关治疗，并将全权负责术后照护。</p>

  <button type="button" onclick="hantarKeWhatsApp()">提交</button>
</form>

<script>
  function hantarKeWhatsApp() {
    let saringan = document.querySelectorAll(".saringan");
    let questionText = [
      "1. 猫咪饲养不足7天",
      "2. 猫咪过去一周内曾寄养或美容",
      "3. 接种后1–3个月内将寄养",
      "4. 猫咪出现腹泻、呕吐、打喷嚏、无力或食欲差",
      "5. 过去两周家中有生病或死亡的猫",
      "6. 猫咪有口臭且食欲不振",
      "7. 主人无法在一周后复诊",
      "8. 主人无法将猫关笼1–3个月",
      "9. 猫咪身体上有伤口",
      "10. 主人家中没有小猫笼",
      "11. 猫咪曾在其他诊所治疗",
      "12. 猫咪不能被他人触摸",
      "13. 猫咪凶猛，会攻击人",
      "14. 主人无法在加强针后关笼1–3个月",
      "15. 主人无法在检查后关笼1–4周"
    ];

    let total = saringan.length;
    let totalYes = 0;
    let notEligibleReasons = [];

    saringan.forEach((item, index) => {
      if (item.value === "1") {
        totalYes++;
      } else {
        notEligibleReasons.push(questionText[index]);
      }
    });

    let screeningScore = Math.round((totalYes / total) * 100);
    let eligibilityStatus = (screeningScore >= 80)
      ? "✅ 适合进行疫苗接种/绝育。"
      : "❌ 不适合进行疫苗接种/绝育（得分低于80%）。";

    let reason = (notEligibleReasons.length > 0)
      ? "\n\n不符合原因：\n- " + notEligibleReasons.join("\n- ")
      : "";

    let message = `🐾 治疗预约与同意书\n\n` +
      `主人姓名：${document.getElementById("nama_pemilik").value}\n` +
      `身份证号码：${document.getElementById("ic_pemilik").value}\n` +
      `地址：${document.getElementById("alamat_pemilik").value}\n` +
      `联系电话：${document.getElementById("telefon_pemilik").value}\n` +
      `电子邮件：${document.getElementById("emel_pemilik").value}\n\n` +
      `猫名：${document.getElementById("nama_kucing").value}\n` +
      `年龄：${document.getElementById("umur_kucing").value}\n` +
      `品种：${document.getElementById("baka_kucing").value}\n` +
      `体重：${document.getElementById("berat_kucing").value}\n` +
      `颜色：${document.getElementById("warna_kucing").value}\n` +
      `疫苗状态：${document.getElementById("vaksin_kucing").value}\n\n` +
      `预约日期：${document.getElementById("tarikh_temujanji").value}\n` +
      `就诊目的：${document.getElementById("tujuan_pemeriksaan").value}\n` +
      `症状描述：${document.getElementById("gejala").value}\n\n` +
      `筛查得分：${screeningScore}%\n` +
      `${eligibilityStatus}${reason}\n\n` +
      `我同意进行治疗，并将负责所有后续护理。`;

    let whatsappURL = `https://wa.me/60182624047?text=${encodeURIComponent(message)}`;
    window.open(whatsappURL, "_blank");
  }
</script>
</body>
</html>
